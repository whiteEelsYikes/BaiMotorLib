# 白的电机驱动库

> 先主要以`BaiMotorLib`目录为主要进行介绍
> 在`BaiMotorLib for py`目录中已经实现具备库原型架构验证，详细见目录中的README.md介绍

## 架构

架构一共分三层设计

> 可以参考`BaiMotorLib for py`中的完整可运行验证程序

* 核心
  与平台无关的通用代码
  主要实现库的通用功能包括调度器等
  高度依赖`控制器`、`驱动`层
* 控制器
  实现具体的控制方法如：
  `PID`、`FOC`或其他等
* 驱动
  主要实现具体电机相关的驱动程式
  包括但不限于`电机`、`编码器`这类基本输入输出（状态识别与反馈）等

核心层初始化需要一个控制器和驱动实例，在核心层中会调用具体控制器和驱动实现对应的调度功能。

> 为什么将控制器与驱动分离设计，并独立出通用核心？
>
> * 解耦与可扩展性
> * 为了复用性和通用（本身就是朝库的方向设计发展的）
>   针对最简单的`直流霍尔编码电机`很多东西都一致，特别多电机设备，多个相同电机设备只需要使用一致的实现。
> * 为了兼容
>   部分定制硬件或特定场景可能需要一些非常规扩展，那么就需要定制特定的`控制器`和`驱动`并在两者中间实现特定的协调功能等
>   包括例如`编码器`实现中一些参数包括譬如控制器对这些反馈的解释和处理等

## 缺陷

这种架构设计会存在一定实时性问题，在针对部分对实时性要求极高的场景或资源匮乏场景可能不适用。

> 暂待发掘......
